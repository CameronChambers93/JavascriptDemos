(function(e){function t(t){for(var s,r,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);h&&h(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,o=1;o<i.length;o++){var c=i[o];0!==n[c]&&(s=!1)}s&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var s={},n={app:0},a=[];function r(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=s,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/JavascriptDemos/dist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var h=c;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";i("85ec")},"0a83":function(e,t,i){e.exports=i.p+"img/black_pawn.41d82a94.png"},"0c5b":function(e,t,i){e.exports=i.p+"img/white_queen.ac545044.png"},"0dea":function(e,t,i){"use strict";i("9f78")},1335:function(e,t,i){e.exports=i.p+"img/white_pawn.6bc087c3.png"},"1a7b":function(e,t,i){e.exports=i.p+"img/white_king.33ff5599.png"},"24a2":function(e,t,i){e.exports=i.p+"img/white_knight.321097b9.png"},"3fcd":function(e,t,i){},"455e":function(e,t,i){e.exports=i.p+"img/black_knight.30d1208a.png"},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");for(var s=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"md-layout md-gutter",staticStyle:{display:"flex","flex-wrap":"wrap",height:"100%"}},["BALL_DEMO"==e.selection?i("BallDemo",{staticClass:"md-layout-item md-size-100"}):e._e(),"BALL_DEMO_3D"==e.selection?i("BallDemo3D",{staticClass:"md-layout-item md-size-100"}):e._e(),"3D_BALL_FLAT"==e.selection?i("BallDemo3DFlat",{staticClass:"md-layout-item md-size-100"}):e._e(),"CHESS"==e.selection?i("Chess",{staticClass:"md-layout-item md-size-100"}):e._e(),"HASH_GRID_TESTER"==e.selection?i("HashGridTester",{staticClass:"md-layout-item md-size-100"}):e._e(),"MENU"==e.selection?i("div",{staticClass:"md-layout-item md-size-100"},[i("h1",[e._v("Main Menu")]),i("div",e._l(e.pages,(function(t,s){return i("md-button",{key:s,on:{click:function(i){e.selection=t}}},[e._v(e._s(t))])})),1)]):i("div",{staticClass:"md-layout-item md-size-100"},[i("md-button",{staticClass:"md-primary",on:{click:function(t){e.selection="MENU"}}},[e._v("Return to Menu")])],1)],1)])},a=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"md-layout md-gutter"},[i("div",{staticClass:"md-layout-item md-layout md-gutter md-alignment-top-center"},[i("div",{staticClass:"md-layout-item md-size-60",attrs:{id:"game-container"}},[i("canvas",{ref:"chess",staticStyle:{border:"1px solid black"},attrs:{id:"chess"},on:{click:e.click,mousemove:e.showCoords}}),null!=e.game?i("div",[e._v(" Current Turn: "+e._s(e.playerTurn)+" "),e.game.checkMate?i("div",{staticStyle:{color:"red"}},[e._v(" Player is in checkmate ")]):i("div",[e.game.playerInCheck?i("div",{staticStyle:{color:"red"}},[e._v(" Player is in check ")]):e._e()]),i("div",[e.game?i("button",{on:{click:function(t){return e.game.resetGame()}}},[e._v("Reset")]):i("button",[e._v("Reset")])])]):e._e()])])])},o=[],c=i("1da1"),l=(i("96cf"),i("3835")),h=i("b85c"),u=i("2909"),d=i("99de"),m=i("262e"),v=i("2caf"),f=i("d4ec"),p=i("bee2"),g=(i("07ac"),i("d81d"),i("8914")),_=i.n(g),b=i("8869"),k=i.n(b),y=i("e72b"),w=i.n(y),I=i("e9af"),O=i.n(I),S=i("455e"),x=i.n(S),M=i("0a83"),C=i.n(M),P=i("1a7b"),T=i.n(P),E=i("0c5b"),j=i.n(E),z=i("9e57"),A=i.n(z),R=i("67a2"),N=i.n(R),F=i("24a2"),L=i.n(F),U=i("1335"),W=i.n(U),D={black_king:_.a,black_queen:k.a,black_rook:w.a,black_bishop:O.a,black_knight:x.a,black_pawn:C.a,white_king:T.a,white_queen:j.a,white_rook:A.a,white_bishop:N.a,white_knight:L.a,white_pawn:W.a},G=function(){function e(t,i,s,n){Object(f["a"])(this,e),this.color=i,this.index=s,this.image=new Image,this.image.src=D[t],this.movements=[],this.extendedMovement=n}return Object(p["a"])(e,[{key:"moveTo",value:function(e){this.index=e}}]),e}(),H=function(e){Object(m["a"])(i,e);var t=Object(v["a"])(i);function i(e,s){var n;return Object(f["a"])(this,i),e?(n=t.call(this,"white_pawn",e,s,!1),n.direction=-1):(n=t.call(this,"black_pawn",e,s,!1),n.direction=1),n.hasMoved=!1,n.isPawn=!0,Object(d["a"])(n)}return Object(p["a"])(i,[{key:"movements",get:function(){return this.hasMoved?[1*this.direction]:[1*this.direction,2*this.direction]},set:function(e){return e}},{key:"moveTo",value:function(e){this.hasMoved=!0,this.index=e}}]),i}(G),B=function(e){Object(m["a"])(i,e);var t=Object(v["a"])(i);function i(e,s){var n;return Object(f["a"])(this,i),e?(n=t.call(this,"white_king",e,s,!1),n.hasMoved=!1):(n=t.call(this,"black_king",e,s,!1),n.hasMoved=!1),n.isKing=!0,n.movements=[-1,1,-16,16,-17,-15,15,17],Object(d["a"])(n)}return Object(p["a"])(i,[{key:"moveTo",value:function(e){this.hasMoved=!0,this.index=e}}]),i}(G),K=function(e){Object(m["a"])(i,e);var t=Object(v["a"])(i);function i(e,s){var n;return Object(f["a"])(this,i),n=e?t.call(this,"white_bishop",e,s,!0):t.call(this,"black_bishop",e,s,!0),n.movements=[-17,-15,15,17],Object(d["a"])(n)}return i}(G),V=function(e){Object(m["a"])(i,e);var t=Object(v["a"])(i);function i(e,s){var n;return Object(f["a"])(this,i),e?(n=t.call(this,"white_rook",e,s,!0),n.hasMoved=!1):(n=t.call(this,"black_rook",e,s,!0),n.hasMoved=!1),n.movements=[-1,1,-16,16],Object(d["a"])(n)}return Object(p["a"])(i,[{key:"moveTo",value:function(e){this.hasMoved=!0,this.index=e}}]),i}(G),$=function(e){Object(m["a"])(i,e);var t=Object(v["a"])(i);function i(e,s){var n;return Object(f["a"])(this,i),n=e?t.call(this,"white_knight",e,s,!1):t.call(this,"black_knight",e,s,!1),n.isKnight=!0,n.movements=[18,-18,33,-33,14,-14,31,-31],Object(d["a"])(n)}return i}(G),q=function(e){Object(m["a"])(i,e);var t=Object(v["a"])(i);function i(e,s){var n;return Object(f["a"])(this,i),n=e?t.call(this,"white_queen",e,s,!0):t.call(this,"black_queen",e,s,!0),n.movements=[-1,1,-16,16,-17,-15,15,17],Object(d["a"])(n)}return i}(G),Z=function(){function e(t){Object(f["a"])(this,e),this.canvas=document.getElementById("chess"),this.width=t,this.tileWidth=t/8,this.tiles={},this.playerTurn=0;for(var i=0;i<8;i++)for(var s=0;s<8;s++)this.tiles[16*i+s]=null;this.tileSelected=-1,this.lastMovement=[0,0],this.playerInCheck=!1,this.checkMate=!1,this.whiteKing,this.blackKing,this.drawBoard(),this.initiatePieces()}return Object(p["a"])(e,[{key:"fillTile",value:function(e,t){var i=Math.floor(e/16),s=e%16,n=this.canvas.getContext("2d");n.fillStyle=t,n.fillRect(i*this.tileWidth,s*this.tileWidth,this.tileWidth,this.tileWidth)}},{key:"markTileAsAvailable",value:function(e){this.fillTile(e,"#ffff00")}},{key:"resetTile",value:function(e){var t=Math.floor(e/16),i=e%16;(t+i)%2==0?this.fillTile(e,"#ffffff"):this.fillTile(e,"#000000")}},{key:"selectTileForMovement",value:function(e){this.tileSelected=e,this.availableMoves=this.getAvailableMovements(e)}},{key:"updateCheckStatus",value:function(){this.isKingInCheck()?(this.isPlayerInCheckMate()&&(this.checkMate=!0),this.playerInCheck=!0):this.playerInCheck=!1}},{key:"isPlayerInCheckMate",value:function(){for(var e=0,t=Object.values(this.tiles);e<t.length;e++){var i=t[e];if(i&&i.color==this.playerTurn&&(this.tileSelected=i.index,this.getAvailableMovements(i.index).length))return this.tileSelected=-1,!1}return this.tileSelected=-1,!0}},{key:"inCheckByPawn",value:function(e){var t=e-16+(this.playerTurn?-1:1),i=e+16+(this.playerTurn?-1:1);return!(!this.tiles[t]||this.tiles[t].color==this.playerTurn||!this.tiles[t].isPawn)||(!(!this.tiles[i]||this.tiles[i].color==this.playerTurn||!this.tiles[i].isPawn)||void 0)}},{key:"inCheckByKnight",value:function(e){for(var t=[18,-18,33,-33,14,-14,31,-31],i=0,s=t;i<s.length;i++){var n=s[i];if(this.tiles[e+n]&&this.tiles[e+n].color!=this.playerTurn&&this.tiles[e+n].isKnight)return!0}}},{key:"isKingInCheck",value:function(){var e;e=this.playerTurn?this.whiteKing:this.blackKing;var t=e.index;if(this.inCheckByPawn(t))return!0;if(this.inCheckByKnight(t))return!0;for(var i=[-17,-16,-15,-1,1,15,16,17],s=0,n=i;s<n.length;s++){var a=n[s],r=t+a;while(r in this.tiles)if(this.tiles[r])if(this.tiles[r].color==this.playerTurn)r=-1;else if(this.tiles[r].extendedMovement){if(-1!=this.tiles[r].movements.indexOf(a))return!0;r=-1}else r=-1;else r+=a}return!1}},{key:"checkTileStatus",value:function(e){return this.tiles[e]?this.tiles[e].color==this.playerTurn?-1:1:0}},{key:"isMovementValid",value:function(e){if(e<0||e>119||e%16>7)return-1;var t=this.checkTileStatus(e),i=this.tileSelected;if(-1==t)return-1;var s=this.tiles[e];this.tiles[i].index=e,this.tiles[e]=this.tiles[i],this.tiles[i]=null;var n=this.isKingInCheck();return this.tiles[i]=this.tiles[e],this.tiles[i].index=i,this.tiles[e]=s,n?-1:t}},{key:"getEnPassantMovements",value:function(e){return!this.tiles[this.lastMovement[1]].isPawn||this.lastMovement[1]!=e-16&&this.lastMovement[1]!=e+16||2!=Math.abs(this.lastMovement[1]-this.lastMovement[0])?[]:[{index:this.lastMovement[1]+this.tiles[e].direction,enPassant:!0,killIndex:this.lastMovement[1]}]}},{key:"getAvailablePawnMovements",value:function(e){var t=[];t.push.apply(t,Object(u["a"])(this.getEnPassantMovements(e)));var i=this.tiles[e].direction;return 0==this.isMovementValid(e+i)&&t.push({index:e+i}),0==this.checkTileStatus(e+i)&&0==this.tiles[e].hasMoved&&0==this.isMovementValid(e+2*i)&&t.push({index:e+2*i}),1==this.isMovementValid(e-16+i)&&t.push({index:e-16+i}),1==this.isMovementValid(e+16+i)&&t.push({index:e+16+i}),t}},{key:"getAvailableKingMovements",value:function(e){if(this.playerInCheck)return[];var t=[];return 0==this.tiles[e].hasMoved&&(t.push.apply(t,Object(u["a"])(this.checkLeftCastling(e))),t.push.apply(t,Object(u["a"])(this.checkRightCastling(e)))),t}},{key:"checkLeftCastling",value:function(e){return this.tiles[e-16]||this.tiles[e-32]||this.tiles[e-48]?[]:[{index:e-32,castle:!0,rookFromIndex:e-64,rookToIndex:e-16}]}},{key:"checkRightCastling",value:function(e){return this.tiles[e+16]||this.tiles[e+32]?[]:[{index:e+32,castle:!0,rookFromIndex:e+48,rookToIndex:e+16}]}},{key:"getAvailableMovements",value:function(e){if(this.tiles[e].isPawn)return this.getAvailablePawnMovements(e);var t=[];this.tiles[e].isKing&&t.push.apply(t,Object(u["a"])(this.getAvailableKingMovements(e)));var i,s=Object(h["a"])(this.tiles[e].movements);try{for(s.s();!(i=s.n()).done;){var n=i.value,a=e+n;if(0==this.checkTileStatus(a)){if(0==this.isMovementValid(a)&&t.push({index:a}),a+=n,this.tiles[e].extendedMovement)while(a in this.tiles){var r=this.isMovementValid(a);0==r?(t.push({index:a}),a+=n):1==r?(t.push({index:a}),a=-1):0==this.checkTileStatus(a)?a+=n:a=-1}}else 1==this.isMovementValid(a)&&t.push({index:a})}}catch(o){s.e(o)}finally{s.f()}return t}},{key:"deselect",value:function(){this.tileSelected=-1,this.availableMoves=[]}},{key:"click",value:function(e){if(-1==this.tileSelected)this.tiles[e]&&this.tiles[e].color==this.playerTurn&&this.selectTileForMovement(e);else{var t=this.availableMoves.map((function(e){return e.index})).indexOf(e);-1!=t&&(this.executeMove(this.availableMoves[t]),this.playerTurn=(this.playerTurn+1)%2,this.updateCheckStatus()),this.deselect()}this.drawBoard(),this.drawPieces()}},{key:"executeMove",value:function(e){e.castle&&(this.tiles[e.rookFromIndex].moveTo(e.rookToIndex),this.tiles[e.rookToIndex]=this.tiles[e.rookFromIndex],this.tiles[e.rookFromIndex]=null),e.enPassant&&(this.tiles[e.killIndex]=null),this.moveToIndex(e.index)}},{key:"moveToIndex",value:function(e){this.lastMovement=[this.tileSelected,e],this.tiles[this.tileSelected].moveTo(e),this.tiles[e]=this.tiles[this.tileSelected],this.tiles[this.tileSelected]=null}},{key:"getCoordinatesFromIndex",value:function(e){var t=Math.floor(e/16),i=e%16;return[t,i]}},{key:"drawBoard",value:function(){var e=this.width/8,t=this.canvas.getContext("2d");t.clearRect(0,0,this.width,this.width),t.fillStyle="#000000";for(var i=0;i<8;i++)for(var s=0;s<8;s++)(i+s)%2==1&&t.fillRect(i*e,s*e,e,e);if(-1!=this.tileSelected){t.fillStyle="#fff000";var n=this.getCoordinatesFromIndex(this.tileSelected),a=Object(l["a"])(n,2),r=a[0],o=a[1];t.fillRect(r*this.tileWidth,o*this.tileWidth,this.tileWidth,this.tileWidth);var c,u=Object(h["a"])(this.availableMoves.map((function(e){return e.index})));try{for(u.s();!(c=u.n()).done;){var d=c.value;t.fillStyle="#20ff00";var m=this.getCoordinatesFromIndex(d),v=Object(l["a"])(m,2),f=v[0],p=v[1];t.fillRect(f*this.tileWidth,p*this.tileWidth,this.tileWidth,this.tileWidth)}}catch(g){u.e(g)}finally{u.f()}}}},{key:"drawPieces",value:function(){for(var e=this.canvas.getContext("2d"),t=0,i=Object.values(this.tiles);t<i.length;t++){var s=i[t];if(null!=s){var n=Math.floor(s.index/16)*this.tileWidth,a=s.index%16*this.tileWidth;e.drawImage(s.image,n,a,this.tileWidth,this.tileWidth)}}}},{key:"addPiece",value:function(e,t,i){var s;"PAWN"==e?s=new H(t,i):"ROOK"==e?s=new V(t,i):"BISHOP"==e?s=new K(t,i):"KNIGHT"==e?s=new $(t,i):"KING"==e?(s=new B(t,i),t?this.whiteKing=s:this.blackKing=s):s=new q(t,i),this.tiles[i]=s}},{key:"initiatePieces",value:function(){this.addPiece("PAWN",0,1),this.addPiece("PAWN",0,1),this.addPiece("PAWN",0,17),this.addPiece("PAWN",0,33),this.addPiece("PAWN",0,49),this.addPiece("PAWN",0,65),this.addPiece("PAWN",0,81),this.addPiece("PAWN",0,97),this.addPiece("PAWN",0,113),this.addPiece("PAWN",1,6),this.addPiece("PAWN",1,22),this.addPiece("PAWN",1,38),this.addPiece("PAWN",1,54),this.addPiece("PAWN",1,70),this.addPiece("PAWN",1,86),this.addPiece("PAWN",1,102),this.addPiece("PAWN",1,118),this.addPiece("ROOK",0,0),this.addPiece("ROOK",0,112),this.addPiece("BISHOP",0,32),this.addPiece("BISHOP",0,80),this.addPiece("KNIGHT",0,16),this.addPiece("KNIGHT",0,96),this.addPiece("KING",0,64),this.addPiece("QUEEN",0,48),this.addPiece("ROOK",1,7),this.addPiece("ROOK",1,119),this.addPiece("BISHOP",1,39),this.addPiece("BISHOP",1,87),this.addPiece("KNIGHT",1,23),this.addPiece("KNIGHT",1,103),this.addPiece("KING",1,71),this.addPiece("QUEEN",1,55),this.drawPieces()}},{key:"resize",value:function(e){this.width=e,this.tileWidth=e/8,this.canvas.width=e,this.canvas.height=e,this.drawBoard(),this.drawPieces()}},{key:"resetGame",value:function(){this.tiles={},this.playerTurn=0;for(var e=0;e<8;e++)for(var t=0;t<8;t++)this.tiles[16*e+t]=null;this.tileSelected=-1,this.lastMovement=[0,0],this.checkMate=!1,this.playerInCheck=!1,this.whiteKing,this.blackKing,this.initiatePieces(),this.drawBoard(),this.drawPieces()}}]),e}(),X=Z,Y={name:"Game",props:{},data:function(){return{loaded:!1,boardWidth:200,game:null,x:0,y:0,aiGame:null}},computed:{playerTurn:function(){return 0==this.game.playerTurn?"Black":"White"},tileWidth:function(){return this.boardWidth/8}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.addEventListener("resize",(function(){t.resizeBoard()})),e.next=3,setTimeout(this.resizeBoard,100);case 3:this.game=new X(this.boardWidth);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{runCastlingTest:function(){this.game.click(65),this.game.click(66),this.game.click(70),this.game.click(68),this.game.click(66),this.game.click(67),this.game.click(54),this.game.click(52),this.game.click(49),this.game.click(50),this.game.click(38),this.game.click(36),this.game.click(50),this.game.click(51),this.game.click(23),this.game.click(5),this.game.click(96),this.game.click(114),this.game.click(39),this.game.click(99),this.game.click(80),this.game.click(65),this.game.click(55),this.game.click(4)},runCheckMateTest:function(){this.game.click(65),this.game.click(66),this.game.click(6),this.game.click(5),this.game.click(48),this.game.click(82),this.game.click(5),this.game.click(4),this.game.click(80),this.game.click(35),this.game.click(118),this.game.click(117)},runCheckTest:function(){this.game.click(65),this.game.click(66),this.game.click(70),this.game.click(68),this.game.click(66),this.game.click(67),this.game.click(54),this.game.click(52),this.game.click(49),this.game.click(50),this.game.click(38),this.game.click(36),this.game.click(50),this.game.click(51),this.game.click(23),this.game.click(5),this.game.click(96),this.game.click(114),this.game.click(39),this.game.click(99),this.game.click(80),this.game.click(65),this.game.click(55),this.game.click(4),this.game.click(65),this.game.click(20)},showCoords:function(e){this.x=e.offsetX,this.y=e.offsetY},click:function(){var e=16*Math.floor(this.x/this.tileWidth),t=Math.floor(this.y/this.tileWidth);this.game.click(e+t)},resizeBoard:function(){var e=document.getElementById("game-container").scrollWidth;this.boardWidth=e,this.game.resize(e)}}},J=Y,Q=i("2877"),ee=Object(Q["a"])(J,r,o,!1,null,"865e53b2",null),te=ee.exports,ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"md-layout md-gutter"},[i("div",{staticClass:"md-layout-item md-layout md-gutter md-alignment-top-center"},[i("div",{staticClass:"md-layout-item md-size-100",attrs:{id:"game-container"}},[i("canvas",{ref:"balldemo",staticStyle:{border:"1px solid black"},attrs:{id:"balldemo"},on:{click:e.click,mousemove:e.showCoords}})]),i("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[i("div",{staticStyle:{width:"100%"}},[e._v(" "+e._s(e.x)+", "+e._s(e.y)+" ")]),e.game?i("div",{staticStyle:{width:"100%"}},[e._v(" Size: "),i("button",{on:{click:function(t){return e.game.setPieceSize(e.game.pieceSize+1)}}},[e._v("+")]),e._v(" "+e._s(e.game.pieceSize)+" "),i("button",{on:{click:function(t){return e.game.setPieceSize(e.game.pieceSize-1)}}},[e._v("-")])]):e._e(),e.game?i("div",{staticStyle:{width:"100%"}},[e._v(" Units: "),i("button",{on:{click:function(t){return e.game.removePieceFromClient()}}},[e._v("-")]),e._v(" "+e._s(e.game.pieceAmount)+" "),i("button",{on:{click:function(t){return e.game.addPieceFromClient()}}},[e._v("+")])]):e._e(),i("div",{staticStyle:{width:"100%"}},[e.game?i("button",{on:{click:function(t){return e.game.resetGameFromClient()}}},[e._v("Reset")]):i("button",[e._v("Reset")])])])])])},se=[],ne=(i("4ec9"),i("d3b7"),i("3ca3"),i("ddb0"),i("6062"),i("cb29"),function(){return{rand_range:function(e,t){return Math.random()*(t-e)+e},rand_normalish:function(){var e=Math.random()+Math.random()+Math.random()+Math.random();return e/4*2-1},rand_int:function(e,t){return Math.round(Math.random()*(t-e)+e)},lerp:function(e,t,i){return e*(i-t)+t},smoothstep:function(e,t,i){return e=e*e*(3-2*e),e*(i-t)+t},smootherstep:function(e,t,i){return e=e*e*e*(e*(6*e-15)+10),e*(i-t)+t},clamp:function(e,t,i){return Math.min(Math.max(e,t),i)},sat:function(e){return Math.min(Math.max(e,0),1)},normalize:function(e){var t,i=Object(l["a"])(e,3),s=i[0],n=i[1],a=i[2];return t=a?Math.sqrt(s*s+n*n+a*a):Math.sqrt(s*s+n*n),s/=t,n/=t,a?[s,n,a/t]:[s,n]}}}()),ae=function(){function e(t,i){Object(f["a"])(this,e),this._bounds=t,this._dimensions=i,this._cells=new Map}return Object(p["a"])(e,[{key:"NewClient",value:function(e,t,i){var s={position:e,dimensions:t,indices:null,owner:i};return this._Insert(s),s}},{key:"_Reset",value:function(){this._cells=new Map}},{key:"_Insert",value:function(e){var t=Object(l["a"])(e.position,2),i=t[0],s=t[1],n=Object(l["a"])(e.dimensions,2),a=n[0],r=n[1],o=this._GetCellIndex([i-a/2,s-r/2]),c=this._GetCellIndex([i+a/2,s+r/2]);e.indices=[o,c];for(var h=o[0],u=c[0];h<=u;++h)for(var d=o[1],m=c[1];d<=m;++d){var v=this._Key(h,d);v in this._cells||(this._cells[v]=new Set),this._cells[v].add(e)}}},{key:"_Key",value:function(e,t){return e+"."+t}},{key:"_GetCellIndex",value:function(e){var t=ne.sat((e[0]-this._bounds[0][0])/(this._bounds[1][0]-this._bounds[0][0])),i=ne.sat((e[1]-this._bounds[0][1])/(this._bounds[1][1]-this._bounds[0][1])),s=Math.floor(t*(this._dimensions[0]-1)),n=Math.floor(i*(this._dimensions[1]-1));return[s,n]}},{key:"FindNear",value:function(e,t){for(var i=Object(l["a"])(e,2),s=i[0],n=i[1],a=Object(l["a"])(t,2),r=a[0],o=a[1],c=this._GetCellIndex([s-r/2,n-o/2]),u=this._GetCellIndex([s+r/2,n+o/2]),d=new Set,m=c[0],v=u[0];m<=v;++m)for(var f=c[1],p=u[1];f<=p;++f){var g=this._Key(m,f);if(g in this._cells){var _,b=Object(h["a"])(this._cells[g]);try{for(b.s();!(_=b.n()).done;){var k=_.value;d.add(k)}}catch(y){b.e(y)}finally{b.f()}}}return d}},{key:"UpdateClient",value:function(e){this.RemoveClient(e),this._Insert(e)}},{key:"RemoveClient",value:function(e){for(var t=Object(l["a"])(e.indices,2),i=t[0],s=t[1],n=i[0],a=s[0];n<=a;++n)for(var r=i[1],o=s[1];r<=o;++r){var c=this._Key(n,r);this._cells[c].delete(e)}}},{key:"isLocationValid",value:function(e){var t=Object(l["a"])(e,2),i=t[0],s=t[1];return i>=this._bounds[0][0]&&i<=this._bounds[1][0]&&s>=this._bounds[0][1]&&s<=this._bounds[1][1]}}]),e}(),re=function(){function e(t,i){Object(f["a"])(this,e);var s=Object(l["a"])(i,2),n=s[0],a=s[1];this._cells=Object(u["a"])(Array(n)).map((function(){return Object(u["a"])(Array(a)).map((function(){return null}))})),this._dimensions=i,this._bounds=t,this._queryIds=0}return Object(p["a"])(e,[{key:"_GetCellIndex",value:function(e){var t=ne.sat((e[0]-this._bounds[0][0])/(this._bounds[1][0]-this._bounds[0][0])),i=ne.sat((e[1]-this._bounds[0][1])/(this._bounds[1][1]-this._bounds[0][1])),s=Math.floor(t*(this._dimensions[0]-1)),n=Math.floor(i*(this._dimensions[1]-1));return[s,n]}},{key:"NewClient",value:function(e,t,i){var s={position:e,dimensions:t,_cells:{min:null,max:null,nodes:null},_queryId:-1,owner:i};return this._Insert(s),s}},{key:"UpdateClient",value:function(e){var t=Object(l["a"])(e.position,2),i=t[0],s=t[1],n=Object(l["a"])(e.dimensions,2),a=n[0],r=n[1],o=this._GetCellIndex([i-a/2,s-r/2]),c=this._GetCellIndex([i+a/2,s+r/2]);e._cells.min[0]==o[0]&&e._cells.min[1]==o[1]&&e._cells.max[0]==c[0]&&e._cells.max[1]==c[1]||(this.Remove(e),this._Insert(e))}},{key:"FindNear",value:function(e,t){for(var i=Object(l["a"])(e,2),s=i[0],n=i[1],a=Object(l["a"])(t,2),r=a[0],o=a[1],c=this._GetCellIndex([s-r/2,n-o/2]),h=this._GetCellIndex([s+r/2,n+o/2]),u=[],d=this._queryIds++,m=c[0],v=h[0];m<=v;++m)for(var f=c[1],p=h[1];f<=p;++f){var g=this._cells[m][f];while(g){var _=g.client;g=g.next,_._queryId!=d&&(_._queryId=d,u.push(_))}}return u}},{key:"_Insert",value:function(e){for(var t=Object(l["a"])(e.position,2),i=t[0],s=t[1],n=Object(l["a"])(e.dimensions,2),a=n[0],r=n[1],o=this._GetCellIndex([i-a/2,s-r/2]),c=this._GetCellIndex([i+a/2,s+r/2]),h=[],u=o[0],d=c[0];u<=d;++u){h.push([]);for(var m=o[1],v=c[1];m<=v;++m){var f=u-o[0],p={next:null,prev:null,client:e};h[f].push(p),p.next=this._cells[u][m],this._cells[u][m]&&(this._cells[u][m].prev=p),this._cells[u][m]=p}}e._cells.min=o,e._cells.max=c,e._cells.nodes=h}},{key:"Remove",value:function(e){for(var t=e._cells.min,i=e._cells.max,s=t[0],n=i[0];s<=n;++s)for(var a=t[1],r=i[1];a<=r;++a){var o=s-t[0],c=a-t[1],l=e._cells.nodes[o][c];l.next&&(l.next.prev=l.prev),l.prev&&(l.prev.next=l.next),l.prev||(this._cells[s][a]=l.next)}e._cells.min=null,e._cells.max=null,e._cells.nodes=null}},{key:"_Reset",value:function(){var e=Object(l["a"])(this._dimensions,2),t=e[0],i=e[1];this._cells=Object(u["a"])(Array(t)).map((function(){return Object(u["a"])(Array(i)).map((function(){return null}))})),this._queryIds=0}}]),e}(),oe=function(){function e(t,i){Object(f["a"])(this,e);var s=Object(l["a"])(i,3),n=s[0],a=s[1],r=s[2];this._cells=Object(u["a"])(Array(n)).map((function(){return Object(u["a"])(Array(a)).map((function(){return Object(u["a"])(Array(r)).map((function(){return null}))}))})),this._dimensions=i,this._bounds=t,this._queryIds=0}return Object(p["a"])(e,[{key:"_GetCellIndex",value:function(e){var t=ne.sat((e[0]-this._bounds[0][0])/(this._bounds[1][0]-this._bounds[0][0])),i=ne.sat((e[1]-this._bounds[0][1])/(this._bounds[1][1]-this._bounds[0][1])),s=ne.sat((e[2]-this._bounds[0][2])/(this._bounds[1][2]-this._bounds[0][2])),n=Math.floor(t*(this._dimensions[0]-1)),a=Math.floor(i*(this._dimensions[1]-1)),r=Math.floor(s*(this._dimensions[2]-1));return[n,a,r]}},{key:"NewClient",value:function(e,t,i){var s={position:e,dimensions:t,_cells:{min:null,max:null,nodes:null},_queryId:-1,owner:i};return this._Insert(s),s}},{key:"UpdateClient",value:function(e){var t=Object(l["a"])(e.position,3),i=t[0],s=t[1],n=t[2],a=Object(l["a"])(e.dimensions,3),r=a[0],o=a[1],c=a[2],h=this._GetCellIndex([i-r/2,s-o/2,n-c/2]),u=this._GetCellIndex([i+r/2,s+o/2,n+c/2]);e._cells.min[0]==h[0]&&e._cells.min[1]==h[1]&&e._cells.max[0]==u[0]&&e._cells.max[1]==u[1]||(this.Remove(e),this._Insert(e))}},{key:"FindNear",value:function(e,t){for(var i=Object(l["a"])(e,3),s=i[0],n=i[1],a=i[2],r=Object(l["a"])(t,3),o=r[0],c=r[1],h=r[2],u=this._GetCellIndex([s-o/2,n-c/2,a-h/2]),d=this._GetCellIndex([s+o/2,n+c/2,a+h/2]),m=[],v=this._queryIds++,f=u[0],p=d[0];f<=p;++f)for(var g=u[1],_=d[1];g<=_;++g)for(var b=u[2],k=d[2];b<=k;++b){var y=this._cells[f][g][b];while(y){var w=y.client;y=y.next,w._queryId!=v&&(w._queryId=v,m.push(w))}}return m}},{key:"_Insert",value:function(e){for(var t=Object(l["a"])(e.position,3),i=t[0],s=t[1],n=t[2],a=Object(l["a"])(e.dimensions,3),r=a[0],o=a[1],c=a[2],h=this._GetCellIndex([i-r/2,s-o/2,n-c/2]),u=this._GetCellIndex([i+r/2,s+o/2,n+c/2]),d=[],m=h[0],v=u[0];m<=v;++m){d.push([]);for(var f=h[1],p=u[1];f<=p;++f){var g=m-h[0];d[g].push([]);for(var _=h[2],b=u[2];_<=b;++_){var k=f-h[1],y={next:null,prev:null,client:e};d[g][k].push(y),y.next=this._cells[m][f][_],this._cells[m][f][_]&&(this._cells[m][f][_].prev=y),this._cells[m][f][_]=y}}}e._cells.min=h,e._cells.max=u,e._cells.nodes=d}},{key:"Remove",value:function(e){for(var t=e._cells.min,i=e._cells.max,s=t[0],n=i[0];s<=n;++s)for(var a=t[1],r=i[1];a<=r;++a)for(var o=t[2],c=i[2];o<=c;++o){var l=s-t[0],h=a-t[1],u=o-t[2],d=e._cells.nodes[l][h][u];d.next&&(d.next.prev=d.prev),d.prev&&(d.prev.next=d.next),d.prev||(this._cells[s][a][o]=d.next)}e._cells.min=null,e._cells.max=null,e._cells.nodes=null}},{key:"_Reset",value:function(){var e=Object(l["a"])(this._dimensions,3),t=e[0],i=e[1],s=e[2];this._cells=Object(u["a"])(Array(t)).map((function(){return Object(u["a"])(Array(i)).map((function(){return function(){return Object(u["a"])(Array(s)).map((function(){return null}))}}))})),this._queryIds=0}}]),e}(),ce={SpatialHash_Crap:ae,SpatialHash_Slow:ae,SpatialHash_Fast:re,SpatialHash_3D:oe},le="balldemo",he=[0,0,0,0],ue=["#000000","#f00","#00ff10","#3800ff"],de=0,me=function(){function e(t,i,s,n,a,r,o,c){Object(f["a"])(this,e),this.id=t,this.color=a,this.size=s,this.direction=n,this.tags=new Map,this.movement=[0,1],this.head=o,this.tail=c,this.grid=i,this.position=r,this.client=i.NewClient(r,[s,s],this),this.client.position=r,i.UpdateClient(this.client)}return Object(p["a"])(e,[{key:"isPieceOverlapping",value:function(e){var t=Object(l["a"])(this.position,2),i=t[0],s=t[1],n=Object(l["a"])(e.position,2),a=n[0],r=n[1],o=a-i,c=r-s,h=Math.sqrt(o*o+c*c);return h<=this.size}},{key:"checkForCollision",value:function(e){var t=Object(l["a"])(e,2),i=t[0],s=t[1],n=[this.position[0]+i*(this.size/2),this.position[1]+s*(this.size/2)];if(n[0]<0||n[0]>this.grid._bounds[1][0]||n[1]<0||n[1]>this.grid._bounds[1][1]){var a=Object(l["a"])(e,2);i=a[0],s=a[1],0!=i?this.direction[0]*=-1:this.direction[1]*=-1}}},{key:"move",value:function(){var e=Object(l["a"])(this.direction,2),t=e[0],i=e[1];this.moveTo([this.position[0]+t,this.position[1]+i]),t>0?this.checkForCollision([1,0]):this.checkForCollision([-1,0]),i>0?this.checkForCollision([0,1]):this.checkForCollision([0,-1])}},{key:"moveTo",value:function(e){this.position=e,this.client.position=e,this.grid.UpdateClient(this.client);var t,i=Object(h["a"])(this.grid.FindNear(this.position,[this.size,this.size]));try{for(i.s();!(t=i.n()).done;){var s=t.value;s.owner.position!=this.position&&this.isPieceOverlapping(s.owner)&&this.tag(s.owner)}}catch(n){i.e(n)}finally{i.f()}}},{key:"tag",value:function(e){if(this.tags[e.id]){if(de-this.tags[e.id]>3){var t={id:this.id,color:this.color,position:this.position,direction:this.direction};this.getTagged(e),e.getTagged(t)}}else{var i={id:this.id,color:this.color,position:this.position,direction:this.direction};this.getTagged(e),e.getTagged(i)}}},{key:"getTagged",value:function(e){e.color>this.color?(he[this.color]-=1,this.color+=1,he[this.color]+=1):e.color<this.color&&(he[this.color]-=1,this.color=Math.min(this.color+1,3),he[this.color]+=1);var t=this.getDirectionTowardsUnit(e);this.direction[0]+=-1*t[0],this.direction[1]+=-1*t[1],this.direction=ne.normalize(this.direction),this.tags[e.id]=de}},{key:"getDirectionTowardsUnit",value:function(e){var t=this.position,i=e.position,s=[i[0]-t[0],i[1]-t[1]];return s=ne.normalize(s),s}}]),e}(),ve=function(){function e(t){var i=this;Object(f["a"])(this,e),this.canvas=document.getElementById(le),this.width=t,this.tileWidth=t/8,this.grid=new ce.SpatialHash_Fast([[0,0],[t,t]],[25,25]),this.pieceAmount=20,this.pieceSize=25,this.pieces=null,this.pieceIdCounter=0;for(var s=0;s<8;s++)for(var n=0;n<8;n++)this.grid[16*s+n]=new Set;this.drawBoard(),this.initiatePieces(this.pieceAmount),this.shouldReset=!1,this.gameInterval=setInterval((function(){i.gameLoop()}),Math.floor(50))}return Object(p["a"])(e,[{key:"resetGame",value:function(e){var t=this;clearInterval(this.gameInterval),he=[0,0,0,0],this.pieces=null,this.grid._Reset();for(var i=0;i<8;i++)for(var s=0;s<8;s++)this.grid[16*i+s]=new Set;this.initiatePieces(this.pieceAmount),this.shouldReset=!1,this.gameInterval=setInterval((function(){t.gameLoop()}),Math.floor(1e3/e))}},{key:"gameLoop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;if(de++,0==he[0]&&0==he[1]&&0==he[2]&&(this.shouldReset=!0),this.shouldReset)return this.resetGame(e);this.executeMoves(),this.drawBoard(),this.drawPieces()}},{key:"executeMoves",value:function(){var e=this.pieces;while(null!=e)e.move(),e=e.tail}},{key:"drawBoard",value:function(){var e=this.canvas.getContext("2d");e.clearRect(0,0,this.width,this.width)}},{key:"drawPieces",value:function(){var e=this.canvas.getContext("2d"),t=this.pieces;while(t){e.fillStyle=ue[t.color];var i=Object(l["a"])(t.position,2),s=i[0],n=i[1],a=t.size;e.beginPath(),e.arc(s,n,a/2,0,2*Math.PI),e.fill(),t=t.tail}}},{key:"addPiece",value:function(e,t,i){var s,n=[Math.floor(Math.random()*this.width),Math.floor(Math.random()*this.width)],a=n[0],r=n[1],o=2*Math.random()*Math.PI,c=[Math.cos(o),Math.sin(o)];s=new me(this.pieceIdCounter++,this.grid,i,c,e,[a,r],t),null==this.pieces||(s.tail=this.pieces,this.pieces.head=s),this.pieces=s,he[e]+=1;var l=0;while(l<10){var u,d=void 0,m=!1,v=this.grid.FindNear([a,r],[i,i]),f=Object(h["a"])(v);try{for(f.s();!(u=f.n()).done;){var p=u.value,g=a-p.position[0],_=r-p.position[1];d=Math.sqrt(g*g+_*_),d<i&&(m=!0)}}catch(b){f.e(b)}finally{f.f()}if(!m)return;a=Math.floor(Math.random()*this.width),r=Math.floor(Math.random()*this.width),l++}}},{key:"getIndexFromCoordinates",value:function(e){var t=Object(l["a"])(e,2),i=t[0],s=t[1];return i<0||s<0||i>this.width||s>this.width?-1:(i=Math.floor(i/this.cellSize),s=Math.floor(s/this.cellSize),16*i+s)}},{key:"getCoordinatesFromIndex",value:function(e){var t=Math.floor(e/16),i=e%16;return[t,i]}},{key:"initiatePieces",value:function(e){this.addPiece(1,100,this.pieceSize);for(var t=1;t<e;t++)this.addPiece(0,100,this.pieceSize)}},{key:"resize",value:function(e){e=745,this.width=e,this.tileWidth=e/8,this.canvas.width=e,this.canvas.height=e,this.drawBoard(),this.drawPieces()}},{key:"click",value:function(e){var t=Object(l["a"])(e,2),i=t[0],s=t[1];console.log(this.grid.FindNear([i,s],[1,1]))}},{key:"setPieceSize",value:function(e){var t=this.pieces;while(t)t.size=e,t=t.tail;this.pieceSize=e}},{key:"addPieceFromClient",value:function(){this.addPiece(0,100,this.pieceSize),this.pieceAmount++}},{key:"removePieceFromClient",value:function(){this.pieces.tail&&(he[this.pieces.color]--,this.grid.Remove(this.pieces.client),this.pieces=this.pieces.tail,this.pieces.head=null,this.pieceAmount-=1)}},{key:"resetGameFromClient",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.shouldReset=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),fe=ve,pe={name:"Game",props:{},data:function(){return{loaded:!1,boardWidth:745,tileWidth:75,game:null,x:0,y:0,aiGame:null}},computed:{},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.addEventListener("resize",(function(){t.resizeBoard()})),e.next=3,setTimeout(this.resizeBoard,10);case 3:this.game=new fe(this.boardWidth);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{runCastlingTest:function(){this.game.click(65),this.game.click(66),this.game.click(70),this.game.click(68),this.game.click(66),this.game.click(67),this.game.click(54),this.game.click(52),this.game.click(49),this.game.click(50),this.game.click(38),this.game.click(36),this.game.click(50),this.game.click(51),this.game.click(23),this.game.click(5),this.game.click(96),this.game.click(114),this.game.click(39),this.game.click(99),this.game.click(80),this.game.click(65),this.game.click(55),this.game.click(4)},runCheckTest:function(){this.game.click(65),this.game.click(66),this.game.click(70),this.game.click(68),this.game.click(66),this.game.click(67),this.game.click(54),this.game.click(52),this.game.click(49),this.game.click(50),this.game.click(38),this.game.click(36),this.game.click(50),this.game.click(51),this.game.click(23),this.game.click(5),this.game.click(96),this.game.click(114),this.game.click(39),this.game.click(99),this.game.click(80),this.game.click(65),this.game.click(55),this.game.click(4),this.game.click(65),this.game.click(20)},showCoords:function(e){this.x=e.offsetX,this.y=e.offsetY},click:function(){this.game.click([this.x,this.y])},resizeBoard:function(){var e=document.getElementById("game-container").scrollWidth;this.boardWidth=e,this.game.resize(e)}}},ge=pe,_e=Object(Q["a"])(ge,ie,se,!1,null,"efc76b26",null),be=_e.exports,ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"viewport"},[i("controls",{attrs:{size:e.pieceSize,units:e.units},on:{sizedecrease:function(t){return e.decreaseSize()},sizeincrease:function(t){return e.increaseSize()},removeunit:function(t){return e.removeUnit()},addunit:function(t){return e.addUnit()},reset:function(t){return e.resetDemo()}}}),i("viewport",{ref:"viewport",attrs:{_size:e.pieceSize},on:{setsize:e.setPieceSize}})],1)},ye=[],we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"viewport"})},Ie=[],Oe=i("5530"),Se=(i("a9e3"),i("2f62")),xe=[0,0,0,0],Me=0,Ce=function(){function e(t,i,s,n,a,r,o,c){Object(f["a"])(this,e),this.id=t,this.color=a,this.size=s,this.direction=n,this.tags=new Map,this.colorNeedsUpdating=!1,this.movement=[0,1],this.head=o,this.tail=c,this.grid=i,this.position=r,this.client=i.NewClient(r,[s,s],this),this.client.position=r,i.UpdateClient(this.client)}return Object(p["a"])(e,[{key:"resize",value:function(e){this.size=e,this.client.dimensions=[e,e]}},{key:"isPieceOverlapping",value:function(e){var t=Object(l["a"])(this.position,2),i=t[0],s=t[1],n=Object(l["a"])(e.position,2),a=n[0],r=n[1],o=a-i,c=r-s,h=Math.sqrt(o*o+c*c);return h<=this.size}},{key:"checkForCollision",value:function(e){var t=Object(l["a"])(e,2),i=t[0],s=t[1],n=[this.position[0]+i*(this.size/2),this.position[1]+s*(this.size/2)];if(n[0]<0||n[0]>this.grid._bounds[1][0]||n[1]<0||n[1]>this.grid._bounds[1][1]){var a=Object(l["a"])(e,2);return i=a[0],s=a[1],0!=i?(this.direction[0]*=-1,!0):(this.direction[1]*=-1,!0)}return!1}},{key:"move",value:function(){var e=Object(l["a"])(this.direction,2),t=e[0],i=e[1];this.moveTo([this.position[0]+t,this.position[1]+i]),t>0?this.checkForCollision([1,0]):this.checkForCollision([-1,0]),i>0?this.checkForCollision([0,1]):this.checkForCollision([0,-1])}},{key:"moveTo",value:function(e){this.position=e,this.client.position=e,this.grid.UpdateClient(this.client);var t,i=Object(h["a"])(this.grid.FindNear(this.position,[this.size,this.size]));try{for(i.s();!(t=i.n()).done;){var s=t.value;s.owner.position!=this.position&&this.isPieceOverlapping(s.owner)&&this.tag(s.owner)}}catch(n){i.e(n)}finally{i.f()}}},{key:"tag",value:function(e){if(this.tags[e.id]){if(Me-this.tags[e.id]>3){var t={id:this.id,color:this.color,position:this.position,direction:this.direction};this.getTagged(e),e.getTagged(t)}}else{var i={id:this.id,color:this.color,position:this.position,direction:this.direction};this.getTagged(e),e.getTagged(i)}}},{key:"getTagged",value:function(e){e.color>this.color?(xe[this.color]-=1,this.color+=1,this.colorNeedsUpdating=!0,xe[this.color]+=1):e.color<this.color&&(xe[this.color]-=1,this.color=Math.min(this.color+1,3),this.colorNeedsUpdating=!0,xe[this.color]+=1);var t=this.getDirectionTowardsUnit(e);this.direction[0]+=-1*t[0],this.direction[1]+=-1*t[1],this.direction=ne.normalize(this.direction),this.tags[e.id]=Me}},{key:"getDirectionTowardsUnit",value:function(e){var t=this.position,i=e.position,s=[i[0]-t[0],i[1]-t[1]];return s=ne.normalize(s),s}}]),e}(),Pe=function(){function e(t){var i=this;Object(f["a"])(this,e),this.width=t,this.tileWidth=t/8,this.grid=new ce.SpatialHash_Fast([[0,0],[t,t]],[25,25]),this.pieceAmount=20,this.pieceSize=25,this.pieces=null,this.lastPiece=null,this.gameId=0,this.pieceIdCounter=0,this.initiatePieces(this.pieceAmount),this.shouldReset=!1,this.gameInterval=setInterval((function(){i.gameLoop()}),Math.floor(50))}return Object(p["a"])(e,[{key:"resetGame",value:function(e){var t=this;clearInterval(this.gameInterval),xe=[0,0,0,0],this.pieces=null,this.grid._Reset(),this.initiatePieces(this.pieceAmount),this.gameId++,this.shouldReset=!1,this.gameInterval=setInterval((function(){t.gameLoop()}),Math.floor(1e3/e))}},{key:"gameLoop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;if(Me++,0==xe[0]&&0==xe[1]&&0==xe[2]&&(this.shouldReset=!0),this.shouldReset)return this.resetGame(e);this.executeMoves()}},{key:"executeMoves",value:function(){var e=this.pieces;while(null!=e)e.move(),e=e.tail}},{key:"addPiece",value:function(e,t){var i,s=Math.floor(Math.random()*this.width),n=Math.floor(Math.random()*this.width),a=2*Math.random()*Math.PI,r=[Math.cos(a),Math.sin(a)];i=new Ce(this.pieceIdCounter++,this.grid,t,r,e,[s,n]),null==this.pieces?(this.pieces=i,this.lastPiece=i):(i.tail=this.pieces,this.pieces.head=i,this.pieces=i),xe[e]+=1;var o=0;while(o<10){var c,l=void 0,u=!1,d=this.grid.FindNear([s,n],[t,t]),m=Object(h["a"])(d);try{for(m.s();!(c=m.n()).done;){var v=c.value,f=s-v.position[0],p=n-v.position[1];l=Math.sqrt(f*f+p*p),l<t&&(u=!0)}}catch(g){m.e(g)}finally{m.f()}if(!u)return;s=Math.floor(Math.random()*this.width),n=Math.floor(Math.random()*this.width),o++}}},{key:"getIndexFromCoordinates",value:function(e){var t=Object(l["a"])(e,2),i=t[0],s=t[1];return i<0||s<0||i>this.width||s>this.width?-1:(i=Math.floor(i/this.cellSize),s=Math.floor(s/this.cellSize),16*i+s)}},{key:"getCoordinatesFromIndex",value:function(e){var t=Math.floor(e/16),i=e%16;return[t,i]}},{key:"initiatePieces",value:function(e){this.addPiece(1,this.pieceSize);for(var t=1;t<e;t++)this.addPiece(0,this.pieceSize)}},{key:"resize",value:function(e){e=745,this.width=e,this.tileWidth=e/8,this.canvas.width=e,this.canvas.height=e}},{key:"click",value:function(e){var t=Object(l["a"])(e,2),i=t[0],s=t[1];console.log(this.grid.FindNear([i,s],[1,1]))}},{key:"setPieceSize",value:function(e){var t=this.pieces;while(t)t.size=e,t=t.tail;this.pieceSize=e}},{key:"addPieceFromClient",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pieceSize;this.addPiece(0,e),this.pieceAmount++}},{key:"removePieceFromClient",value:function(){this.lastPiece.head&&(xe[this.lastPiece.color]--,this.grid.Remove(this.lastPiece.client),this.lastPiece=this.lastPiece.head,this.lastPiece.tail=null,this.pieceAmount-=1)}},{key:"resetGameFromClient",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.shouldReset=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Te=Pe,Ee={props:{_size:{default:25,type:Number}},data:function(){return{height:400,refreshInterval:null,currentGameId:0,size:25,reset:!1}},methods:Object(Oe["a"])(Object(Oe["a"])(Object(Oe["a"])({},Object(Se["d"])(["RESIZE"])),Object(Se["b"])(["INIT","ANIMATE","SET_PIECE","RESIZE_PIECES","REMOVE_LAST_UNIT","RESET_STATE"])),{},{loop:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.game.pieces,s=-1,n=e.reset,i.size!=e._size&&(e.game.pieceSize=e._size,s=e._size),e.SET_PIECE({pieces:i,resize:s,reset:n}).then((function(){e.ANIMATE().then((function(){setTimeout((function(){e.loop()}),50)}))}));case 5:case"end":return t.stop()}}),t)})))()},addUnit:function(){this.game.addPieceFromClient()},removeUnit:function(){this.game.removePieceFromClient();var e=this.game.pieces;this.REMOVE_LAST_UNIT({pieces:e})},resetDemo:function(){this.game.resetGame(20)}}),mounted:function(){var e=this;this.game=new Te(this.height);var t=this.game.pieces;this.$emit("setsize",t.size),this.INIT({width:this.$el.offsetWidth,height:this.$el.offsetHeight,el:this.$el,piece:t}).then((function(){e.loop(),window.addEventListener("resize",(function(){e.RESIZE({width:e.$el.offsetWidth,height:e.$el.offsetHeight})}))}))},beforeDestroy:function(){this.RESET_STATE()}},je=Ee,ze=(i("8824"),Object(Q["a"])(je,we,Ie,!1,null,null,null)),Ae=ze.exports,Re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex flex-col absolute w-64 h-auto pin-r pin-b bg-grey-darkest text-white rounded mr-2 mb-2 z-10"},[i("div",{staticClass:"p-2 mt-1"},[e._v(" Controls - Press ESC for Menu ")]),i("div",{staticClass:"bg-grey-dark h-full p-3 rounded-b flex flex-col border border-grey-darkest"},[i("div",{staticClass:"border-b border-grey-darkest mb-2 pb-2"},[i("p",{staticClass:"mb-1 text-grey-light font-bold"},[e._v(" Scenery ")]),i("div",{staticClass:"flex"},[i("p",{staticClass:"flex items-center justify-between mb-1"},[e._v(" Size ")]),i("div",[i("button",{on:{click:function(t){return e.$emit("sizedecrease")}}},[e._v("-")]),e._v(" "+e._s(e.size)+" "),i("button",{on:{click:function(t){return e.$emit("sizeincrease")}}},[e._v("+")])])]),i("div",{staticClass:"flex"},[i("p",{staticClass:"flex items-center justify-between mb-1"},[e._v(" Units ")]),i("div",[i("button",{on:{click:function(t){return e.$emit("removeunit")}}},[e._v("-")]),e._v(" "+e._s(e.units)+" "),i("button",{on:{click:function(t){return e.$emit("addunit")}}},[e._v("+")])])]),i("p",{staticClass:"flex items-center justify-between"},[e._v(" Axis Lines "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.axisLinesVisible,expression:"axisLinesVisible"}],attrs:{type:"checkbox",name:"axis-lines",id:"axis-lines"},domProps:{checked:Array.isArray(e.axisLinesVisible)?e._i(e.axisLinesVisible,null)>-1:e.axisLinesVisible},on:{click:e.toggleAxisLines,change:function(t){var i=e.axisLinesVisible,s=t.target,n=!!s.checked;if(Array.isArray(i)){var a=null,r=e._i(i,a);s.checked?r<0&&(e.axisLinesVisible=i.concat([a])):r>-1&&(e.axisLinesVisible=i.slice(0,r).concat(i.slice(r+1)))}else e.axisLinesVisible=n}}})])]),e.CAMERA_POSITION?i("div",{staticClass:"border-b border-grey-darkest mb-2 pb-2"},[i("p",{staticClass:"mb-1 text-grey-light font-bold"},[e._v(" Camera Position ")]),i("p",{staticClass:"flex justify-between w-full mb-2 text-grey-light"},[e._v(" X:"),i("span",{staticClass:"text-white"},[e._v(e._s(e.CAMERA_POSITION.x))])]),i("p",{staticClass:"flex justify-between w-full mb-2 text-grey-light"},[e._v(" Y:"),i("span",{staticClass:"text-white"},[e._v(e._s(e.CAMERA_POSITION.y))])]),i("p",{staticClass:"flex justify-between w-full mb-2 text-grey-light"},[e._v(" Z:"),i("span",{staticClass:"text-white"},[e._v(e._s(e.CAMERA_POSITION.z))])]),i("p",{staticClass:"flex items-center"},[i("button",{staticClass:"bg-grey-light cursor-pointer shadow p-2 mx-auto",on:{click:e.resetCameraPosition}},[e._v(" Reset Camera ")]),i("button",{staticClass:"bg-grey-light cursor-pointer shadow p-2 mx-auto",on:{click:function(t){return e.$emit("reset")}}},[e._v(" Reset Demo ")])])]):e._e()])])},Ne=[],Fe={props:{size:{default:25,type:Number},units:{default:20,type:Number}},created:function(){},data:function(){return{axisLinesVisible:!0,pyramidsVisible:!0}},computed:Object(Oe["a"])({},Object(Se["c"])(["CAMERA_POSITION"])),methods:Object(Oe["a"])(Object(Oe["a"])({},Object(Se["d"])(["SET_CAMERA_POSITION","RESET_CAMERA_ROTATION","HIDE_AXIS_LINES","SHOW_AXIS_LINES","HIDE_PYRAMIDS","SHOW_PYRAMIDS"])),{},{resetCameraPosition:function(){this.SET_CAMERA_POSITION({x:0,y:0,z:500}),this.RESET_CAMERA_ROTATION()},toggleAxisLines:function(){this.axisLinesVisible?(this.HIDE_AXIS_LINES(),this.axisLinesVisible=!1):(this.SHOW_AXIS_LINES(),this.axisLinesVisible=!0)},togglePyramids:function(){this.pyramidsVisible?(this.HIDE_PYRAMIDS(),this.pyramidsVisible=!1):(this.SHOW_PYRAMIDS(),this.pyramidsVisible=!0)}})},Le=Fe,Ue=(i("e31b"),Object(Q["a"])(Le,Re,Ne,!1,null,"4e77f450",null)),We=Ue.exports,De={data:function(){return{height:800,pieceSize:25,units:20}},components:{viewport:Ae,controls:We},methods:{decreaseSize:function(){this.pieceSize--},increaseSize:function(){this.pieceSize++},setPieceSize:function(e){this.pieceSize=e},addUnit:function(){this.units++;var e=this.$refs.viewport;e.addUnit()},removeUnit:function(){this.units--;var e=this.$refs.viewport;e.removeUnit()},resetDemo:function(){var e=this.$refs.viewport;e.resetDemo()}},beforeDestroy:function(){},mounted:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},Ge=De,He=(i("b806"),Object(Q["a"])(Ge,ke,ye,!1,null,null,null)),Be=He.exports,Ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"viewport"},[i("controls",{attrs:{size:e.pieceSize,units:e.units},on:{sizedecrease:function(t){return e.decreaseSize()},sizeincrease:function(t){return e.increaseSize()},removeunit:function(t){return e.removeUnit()},addunit:function(t){return e.addUnit()},reset:function(t){return e.resetDemo()}}}),i("viewport",{ref:"viewport",attrs:{_size:e.pieceSize},on:{setsize:e.setPieceSize}})],1)},Ve=[],$e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"viewport"})},qe=[],Ze=[0,0,0,0],Xe=0,Ye=20,Je=function(){function e(t,i,s,n,a,r,o,c){Object(f["a"])(this,e),this.id=t,this.color=a,this.size=s,this.direction=n,this.tags=new Map,this.colorNeedsUpdating=!1,this.movement=[0,1,0],this.head=o,this.tail=c,this.grid=i,this.position=r,this.client=i.NewClient(r,[s,s,s],this),this.client.position=r,i.UpdateClient(this.client)}return Object(p["a"])(e,[{key:"resize",value:function(e){this.size=e,this.client.dimensions=[e,e,e]}},{key:"isPieceOverlapping",value:function(e){var t=Object(l["a"])(this.position,3),i=t[0],s=t[1],n=t[2],a=Object(l["a"])(e.position,3),r=a[0],o=a[1],c=a[2],h=r-i,u=o-s,d=c-n,m=Math.sqrt(h*h+u*u+d*d);return m<=this.size}},{key:"checkForCollision",value:function(e){var t=Object(l["a"])(e,3),i=t[0],s=t[1],n=t[2],a=[this.position[0]+i*(this.size/2),this.position[1]+s*(this.size/2),this.position[2]+n*(this.size/2)];if(a[0]<0||a[0]>this.grid._bounds[1][0]||a[1]<0||a[1]>this.grid._bounds[1][1]||a[2]<0||a[2]>this.grid._bounds[1][2]){var r=Object(l["a"])(e,3);return i=r[0],s=r[1],n=r[2],0!=i?(this.direction[0]*=-1,!0):0!=s?(this.direction[1]*=-1,!0):(this.direction[2]*=-1,!0)}return!1}},{key:"move",value:function(){var e=Object(l["a"])(this.direction,3),t=e[0],i=e[1],s=e[2];this.moveTo([this.position[0]+t,this.position[1]+i,this.position[2]+s]),t>0?this.checkForCollision([1,0,0]):this.checkForCollision([-1,0,0]),i>0?this.checkForCollision([0,1,0]):this.checkForCollision([0,-1,0]),s>0?this.checkForCollision([0,0,1]):this.checkForCollision([0,0,-1])}},{key:"moveTo",value:function(e){this.position=e,this.client.position=e,this.grid.UpdateClient(this.client);var t,i=Object(h["a"])(this.grid.FindNear(this.position,[this.size/2,this.size/2,this.size/2]));try{for(i.s();!(t=i.n()).done;){var s=t.value;s.owner.id!=this.id&&this.isPieceOverlapping(s.owner)&&this.tag(s.owner)}}catch(n){i.e(n)}finally{i.f()}}},{key:"tag",value:function(e){var t={id:this.id,color:this.color,position:this.position,direction:this.direction};this.getTagged(e),e.getTagged(t)}},{key:"getTagged",value:function(e){this.tags[e.id]||(this.tags[e.id]=0),Xe-this.tags[e.id]>3&&(e.color>this.color?(Ze[this.color]-=1,this.color+=1,this.colorNeedsUpdating=!0,Ze[this.color]+=1):e.color<this.color&&(Ze[this.color]-=1,this.color=Math.min(this.color+1,3),this.colorNeedsUpdating=!0,Ze[this.color]+=1));var t=this.getDirectionTowardsUnit(e);this.direction[0]+=-1*t[0],this.direction[1]+=-1*t[1],this.direction[2]+=-1*t[2],this.direction=ne.normalize(this.direction),this.tags[e.id]=Xe}},{key:"getDirectionTowardsUnit",value:function(e){var t=this.position,i=e.position,s=[i[0]-t[0],i[1]-t[1],i[2]-t[2]];return s=ne.normalize(s),s}}]),e}(),Qe=function(){function e(t){var i=this;Object(f["a"])(this,e),this.width=t,this.tileWidth=t/8,this.grid=new ce.SpatialHash_3D([[0,0,0],[t,t,t]],[25,25,25]),this.pieceAmount=20,this.pieceSize=25,this.pieces=null,this.lastPiece=null,this.gameId=0,this.pieceIdCounter=0,this.initiatePieces(this.pieceAmount),this.shouldReset=!1,this.gameInterval=setInterval((function(){i.gameLoop()}),Math.floor(1e3/Ye))}return Object(p["a"])(e,[{key:"resetGame",value:function(){var e=this;clearInterval(this.gameInterval),Ze=[0,0,0,0],this.pieces=null,this.grid._Reset(),this.initiatePieces(this.pieceAmount),this.gameId++,this.shouldReset=!1,this.gameInterval=setInterval((function(){e.gameLoop()}),Math.floor(1e3/Ye))}},{key:"gameLoop",value:function(){if(Xe++,0==Ze[0]&&0==Ze[1]&&0==Ze[2]&&(this.shouldReset=!0),this.shouldReset)return this.resetGame();this.executeMoves()}},{key:"executeMoves",value:function(){var e=this.pieces;while(null!=e)e.move(),e=e.tail}},{key:"addPiece",value:function(e,t){var i,s=Math.floor(Math.random()*this.width),n=Math.floor(Math.random()*this.width),a=Math.floor(Math.random()*this.width),r=2*Math.random()*Math.PI,o=[Math.cos(r),Math.sin(r),Math.tan(r)%1];i=new Je(this.pieceIdCounter++,this.grid,t,o,e,[s,n,a]),null==this.pieces?(this.pieces=i,this.lastPiece=i):(i.tail=this.pieces,this.pieces.head=i,this.pieces=i),Ze[e]+=1;var c=0;while(c<10){var l,u=void 0,d=!1,m=this.grid.FindNear([s,n,a],[t,t,t]),v=Object(h["a"])(m);try{for(v.s();!(l=v.n()).done;){var f=l.value,p=s-f.position[0],g=n-f.position[1],_=a-f.position[2];u=Math.sqrt(p*p+g*g+_*_),u<t&&(d=!0)}}catch(b){v.e(b)}finally{v.f()}if(!d)return;s=Math.floor(Math.random()*this.width),n=Math.floor(Math.random()*this.width),a=Math.floor(Math.random()*this.width),c++}}},{key:"initiatePieces",value:function(e){this.addPiece(1,this.pieceSize);for(var t=1;t<e;t++)this.addPiece(0,this.pieceSize)}},{key:"resize",value:function(e){e=745,this.width=e,this.tileWidth=e/8,this.canvas.width=e,this.canvas.height=e}},{key:"click",value:function(e){var t=Object(l["a"])(e,2),i=t[0],s=t[1];console.log(this.grid.FindNear([i,s],[1,1]))}},{key:"setPieceSize",value:function(e){var t=this.pieces;while(t)t.size=e,t=t.tail;this.pieceSize=e}},{key:"addPieceFromClient",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pieceSize;this.addPiece(0,e),this.pieceAmount++}},{key:"removePieceFromClient",value:function(){this.lastPiece.head&&(Ze[this.lastPiece.color]--,this.grid.Remove(this.lastPiece.client),this.lastPiece=this.lastPiece.head,this.lastPiece.tail=null,this.pieceAmount-=1)}},{key:"resetGameFromClient",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.shouldReset=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"stop",value:function(){var e,t=this.pieces;while(t)e=t.tail,t={},t=e;clearInterval(this.gameInterval)}}]),e}(),et=Qe,tt={props:{_size:{default:25,type:Number}},data:function(){return{height:400,refreshInterval:null,currentGameId:0,size:25,reset:!1}},methods:Object(Oe["a"])(Object(Oe["a"])(Object(Oe["a"])({},Object(Se["d"])(["RESIZE"])),Object(Se["b"])(["INIT","ANIMATE","SET_PIECE","RESIZE_PIECES","REMOVE_LAST_UNIT","RESET_STATE"])),{},{loop:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.game.pieces,s=-1,n=e.reset,i.size!=e._size&&(e.game.pieceSize=e._size,s=e._size),e.SET_PIECE({pieces:i,resize:s,reset:n}).then((function(){e.ANIMATE().then((function(){setTimeout((function(){e.loop()}),50)}))}));case 5:case"end":return t.stop()}}),t)})))()},addUnit:function(){this.game.addPieceFromClient()},removeUnit:function(){this.game.removePieceFromClient();var e=this.game.pieces;this.REMOVE_LAST_UNIT({pieces:e})},resetDemo:function(){this.game.resetGame(20)}}),mounted:function(){var e=this;this.game=new et(this.height);var t=this.game.pieces;this.$emit("setsize",80),this.INIT({width:this.$el.offsetWidth,height:this.$el.offsetHeight,el:this.$el,piece:t}).then((function(){e.loop(),window.addEventListener("resize",(function(){e.RESIZE({width:e.$el.offsetWidth,height:e.$el.offsetHeight})}))}))},created:function(){},beforeDestroy:function(){this.game.stop(),this.RESET_STATE()}},it=tt,st=(i("f612"),Object(Q["a"])(it,$e,qe,!1,null,null,null)),nt=st.exports,at={data:function(){return{height:800,pieceSize:25,units:20}},components:{viewport:nt,controls:We},methods:{decreaseSize:function(){this.pieceSize--},increaseSize:function(){this.pieceSize++},setPieceSize:function(e){this.pieceSize=e},addUnit:function(){this.units++;var e=this.$refs.viewport;e.addUnit()},removeUnit:function(){this.units--;var e=this.$refs.viewport;e.removeUnit()},resetDemo:function(){var e=this.$refs.viewport;e.resetDemo()}},beforeDestroy:function(){},mounted:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},rt=at,ot=(i("0dea"),Object(Q["a"])(rt,Ke,Ve,!1,null,null,null)),ct=ot.exports,lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"md-layout md-gutter"},[i("div",{staticClass:"md-layout-item md-layout md-gutter md-alignment-top-center"},[i("div",{staticClass:"md-layout-item md-size-100"},[i("h1",[e._v("Spatial HashGrid Benchmarks")]),e.loading?i("div",[e._v(" Loading tests, please wait.... ")]):i("div",[i("h3",[e._v("Results")]),i("div",{domProps:{innerHTML:e._s(e.results)}}),i("md-button",{on:{click:function(t){return e.rerun()}}},[e._v("Run Tests Again")])],1)])])])},ht=[],ut=1e5,dt=1e4,mt=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],vt=[100,100,100],ft=[],pt=0;pt<ut;++pt)ft.push([ne.rand_range(mt[0][0],mt[1][0]),ne.rand_range(mt[0][1],mt[1][1]),ne.rand_range(mt[0][2],mt[1][2])]);for(var gt=[],_t=0;_t<dt;++_t){var bt=[ne.rand_range(mt[0][0],mt[1][0]),ne.rand_range(mt[0][1],mt[1][1]),ne.rand_range(mt[0][2],mt[1][2])];gt.push(bt)}for(var kt=[],yt=0;yt<ut;++yt){var wt=[Math.random(),Math.random(),Math.random()];kt.push(wt)}var It=function(){function e(t){Object(f["a"])(this,e),this._grid=new t(mt,vt),this._clients=[];for(var i=0;i<ut;++i){var s=this._grid.NewClient(ft[i],[15,15]);this._clients.push(s)}}return Object(p["a"])(e,[{key:"Test_FindNearby",value:function(){for(var e=[15,15],t=performance.now(),i=0;i<dt;++i)this._grid.FindNear([gt[i][0],gt[i][1]],e);var s=performance.now()-t;return s}},{key:"Test_Update",value:function(){for(var e=0;e<this._clients.length;++e){var t=this._clients[e];t.position[0]=ft[e][0],t.position[1]=ft[e][1],this._grid.UpdateClient(this._clients[e])}for(var i=performance.now(),s=0;s<this._clients.length;++s){var n=this._clients[s];n.position[0]+=kt[s][0],n.position[1]+=kt[s][1],this._grid.UpdateClient(this._clients[s])}var a=performance.now()-i;return a}}]),e}(),Ot=function(){function e(t){Object(f["a"])(this,e),this._grid=new t(mt,vt),this._clients=[];for(var i=0;i<ut;++i){var s=this._grid.NewClient(ft[i],[15,15,15]);this._clients.push(s)}}return Object(p["a"])(e,[{key:"Test_FindNearby",value:function(){for(var e=[15,15,15],t=performance.now(),i=0;i<dt;++i)this._grid.FindNear(gt[i],e);var s=performance.now()-t;return s}},{key:"Test_Update",value:function(){for(var e=0;e<this._clients.length;++e){var t=this._clients[e];t.position[0]=ft[e][0],t.position[1]=ft[e][1],t.position[2]=ft[e][2],this._grid.UpdateClient(this._clients[e])}for(var i=performance.now(),s=0;s<this._clients.length;++s){var n=this._clients[s];n.position[0]+=kt[s][0],n.position[1]+=kt[s][1],n.position[2]+=kt[s][2],this._grid.UpdateClient(this._clients[s])}var a=performance.now()-i;return a}}]),e}(),St={test:function(){return new Promise((function(e){var t=new It(ce.SpatialHash_Crap),i=new It(ce.SpatialHash_Fast),s=new Ot(ce.SpatialHash_3D),n="";n+="Spatial Grid (Slow) - FindNearby: "+t.Test_FindNearby()+"ms<br>",n+="Spatial Grid (Fast) - FindNearby: "+i.Test_FindNearby()+"ms<br>",n+="Spatial Grid (3D) - FindNearby: "+s.Test_FindNearby()+"ms<br>",n+="----------------------------------<br>",n+="Spatial Grid (Slow) - FindNearby: "+t.Test_FindNearby()+"ms<br>",n+="Spatial Grid (Fast) - FindNearby: "+i.Test_FindNearby()+"ms<br>",n+="Spatial Grid (3D) - FindNearby: "+s.Test_FindNearby()+"ms<br>",n+="----------------------------------<br>",n+="----------------------------------<br>",n+="Spatial Grid (Slow) - Update: "+t.Test_Update()+"ms<br>",n+="Spatial Grid (Fast) - Update: "+i.Test_Update()+"ms<br>",n+="Spatial Grid (3D) - Update: "+s.Test_Update()+"ms<br>",n+="----------------------------------<br>",n+="Spatial Grid (Slow) - Update: "+t.Test_Update()+"ms<br>",n+="Spatial Grid (Fast) - Update: "+i.Test_Update()+"ms<br>",n+="Spatial Grid (3D) - Update: "+s.Test_Update()+"ms<br>",e(n)}))}},xt={name:"HashGridBenchmarks",props:{},data:function(){return{tester:null,loading:!0,results:""}},computed:{},mounted:function(){},created:function(){setTimeout(this.createTester,100)},methods:{rerun:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.results="",setTimeout(e.createTester,100);case 3:case"end":return t.stop()}}),t)})))()},createTester:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:St.test().then((function(t){e.loading=!1,e.results=t}));case 1:case"end":return t.stop()}}),t)})))()}}},Mt=xt,Ct=Object(Q["a"])(Mt,lt,ht,!1,null,"46f67db2",null),Pt=Ct.exports,Tt={name:"App",components:{Chess:te,BallDemo:be,BallDemo3DFlat:Be,BallDemo3D:ct,HashGridTester:Pt},data:function(){return{selection:"MENU",pages:["CHESS","BALL_DEMO","3D_BALL_FLAT","HASH_GRID_TESTER","BALL_DEMO_3D"]}},created:function(){var e=this;window.addEventListener("keydown",(function(t){"Escape"===t.key&&(e.selection="MENU")}))}},Et=Tt,jt=(i("034f"),Object(Q["a"])(Et,n,a,!1,null,null,null)),zt=jt.exports,At=i("9483");Object(At["a"])("".concat("/JavascriptDemos/dist/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var Rt=i("43f9"),Nt=i.n(Rt),Ft=(i("51de"),i("e094"),i("b103"));s["default"].use(Se["a"]);var Lt=function(){return{width:0,height:0,camera:null,controls:null,scene:null,renderer:null,axisLines:[],spheres:[],sphereIdPlusFactor:0,sphereIdMinusFactor:1}},Ut=new Se["a"].Store({state:{width:0,height:0,camera:null,controls:null,scene:null,renderer:null,axisLines:[],spheres:[],sphereIdPlusFactor:0,sphereIdMinusFactor:1},getters:{CAMERA_POSITION:function(e){return e.camera?e.camera.position:null}},mutations:{RESET_STATE:function(e){var t,i=Object(h["a"])(e.spheres);try{for(i.s();!(t=i.n()).done;){var s=t.value;e.scene.remove(s),delete s.geometry,delete s.material}}catch(n){i.e(n)}finally{i.f()}Object.assign(e,Lt())},SET_VIEWPORT_SIZE:function(e,t){var i=t.width,s=t.height;e.width=i,e.height=s},INITIALIZE_RENDERER:function(e,t){e.renderer||(e.renderer=new Ft["n"]({antialias:!0}),e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setSize(e.width,e.height),t.appendChild(e.renderer.domElement))},INITIALIZE_CAMERA:function(e){e.camera=new Ft["i"](60,e.width/e.height,1,1e3),e.camera.position.z=500},INITIALIZE_CONTROLS:function(e){e.controls=new Ft["l"](e.camera,e.renderer.domElement),e.controls.rotateSpeed=1,e.controls.zoomSpeed=1.2,e.controls.panSpeed=.8,e.controls.noZoom=!1,e.controls.noPan=!1,e.controls.staticMoving=!0,e.controls.dynamicDampingFactor=.3,e.controls.keys=[65,83,68]},UPDATE_CONTROLS:function(e){e.controls.update()},INITIALIZE_SCENE:function(e){var t,i;e.scene=null,e.scene=new Ft["j"],e.spheres=[],e.scene.background=new Ft["b"](13421772);var s=[0,15728640,65284,24575,16777215],n=e.pieces,a=new Ft["k"](n.size/2,32,32),r=0;while(n){var o=new Ft["h"]({color:s[n.color],flatShading:!0}),c=new Ft["g"](a,o),h=Object(l["a"])(n.position,2);c.position.x=h[0],c.position.y=h[1],n.position.length>2?c.position.z=n.position[2]:c.position.z=12.5,c.updateMatrix(),c.matrixAutoUpdate=!1,e.spheres.push(c),n.sphereIndex=r++,n=n.tail}(t=e.scene).add.apply(t,Object(u["a"])(e.spheres)),console.log(e.spheres);var d=new Ft["c"](16777215);d.position.set(1,1,1),e.scene.add(d);var m=new Ft["c"](8840);m.position.set(-1,-1,-1),e.scene.add(m);var v=new Ft["a"](2236962);e.scene.add(v);var f=new Ft["f"]({color:255}),p=new Ft["d"];p.vertices.push(new Ft["m"](0,0,0)),p.vertices.push(new Ft["m"](0,1e3,0));var g=new Ft["e"](p,f);e.axisLines.push(g);var _=new Ft["f"]({color:65280}),b=new Ft["d"];b.vertices.push(new Ft["m"](0,0,0)),b.vertices.push(new Ft["m"](1e3,0,0));var k=new Ft["e"](b,_);e.axisLines.push(k);var y=new Ft["f"]({color:16711680}),w=new Ft["d"];w.vertices.push(new Ft["m"](0,0,0)),w.vertices.push(new Ft["m"](0,0,1e3));var I=new Ft["e"](w,y);e.axisLines.push(I),(i=e.scene).add.apply(i,Object(u["a"])(e.axisLines))},RESIZE:function(e,t){var i=t.width,s=t.height;e.width=i,e.height=s,e.camera.aspect=i/s,e.camera.updateProjectionMatrix(),e.renderer.setSize(i,s),e.controls.handleResize(),e.renderer.render(e.scene,e.camera)},SET_CAMERA_POSITION:function(e,t){var i=t.x,s=t.y,n=t.z;e.camera&&e.camera.position.set(i,s,n)},RESET_CAMERA_ROTATION:function(e){e.camera&&(e.camera.rotation.set(0,0,0),e.camera.quaternion.set(0,0,0,1),e.camera.up.set(0,1,0),e.controls.target.set(0,0,0))},HIDE_AXIS_LINES:function(e){var t;(t=e.scene).remove.apply(t,Object(u["a"])(e.axisLines)),e.renderer.render(e.scene,e.camera)},SHOW_AXIS_LINES:function(e){var t;(t=e.scene).add.apply(t,Object(u["a"])(e.axisLines)),e.renderer.render(e.scene,e.camera)},HIDE_spheres:function(e){var t;(t=e.scene).remove.apply(t,Object(u["a"])(e.spheres)),e.renderer.render(e.scene,e.camera)},SHOW_spheres:function(e){var t;(t=e.scene).add.apply(t,Object(u["a"])(e.spheres)),e.renderer.render(e.scene,e.camera)},SET_PIECES:function(e,t){e.pieces=t},UPDATE_FRAME:function(e){var t=e.pieces,i=[0,15728640,65284,24575,16777215];while(t){var s=t.sphereIndex,n=[t.position[0],t.position[1]];e.spheres[s].position.x=n[0],e.spheres[s].position.y=n[1],t.position.length>2&&(e.spheres[s].position.z=t.position[2]),t.colorNeedsUpdating&&(e.spheres[s].material=new Ft["h"]({color:i[t.color],flatShading:!0}),t.colorNeedsUpdating=!1),e.spheres[s].updateMatrix(),t=t.tail}},RESIZE_PIECES:function(e,t){console.log("resize");var i=e.pieces,s=new Ft["k"](t/2,32,32);while(i){i.resize(t);var n=i.sphereIndex;e.spheres[n].geometry=s,i=i.tail}},REMOVE_UNIT:function(e){e.spheres[e.spheres.length-1].visible=!1,e.spheres.pop()},ADD_UNIT:function(e,t){var i=t,s=0,n=new Ft["k"](i.size/2,32,32),a=new Ft["h"]({color:s,flatShading:!0}),r=new Ft["g"](n,a),o=Object(l["a"])(i.position,3);r.position.x=o[0],r.position.y=o[1],r.position.z=o[2],r.updateMatrix(),r.matrixAutoUpdate=!1,i.piece.sphereIndex=e.spheres.length,e.spheres.push(r)}},actions:{INIT:function(e,t){var i=e.state,s=e.commit,n=t.width,a=t.height,r=t.el,o=t.piece;return new Promise((function(e){s("SET_VIEWPORT_SIZE",{width:n,height:a}),s("INITIALIZE_RENDERER",r),s("INITIALIZE_CAMERA"),s("INITIALIZE_CONTROLS"),s("SET_PIECES",o),s("INITIALIZE_SCENE"),i.renderer.render(i.scene,i.camera),i.controls.addEventListener("change",(function(){i.renderer.render(i.scene,i.camera)})),e()}))},SET_PIECE:function(e,t){var i=this,s=e.state,n=e.commit,a=t.pieces,r=t.resize,o=!1;return s.pieces&&(s.pieces.id!=a.id&&(o=!0),-1!=r&&n("RESIZE_PIECES",r)),new Promise((function(e){n("SET_PIECES",a,r),o&&(i.state.sphereIdPlusFactor+=s.spheres.length,n("INITIALIZE_SCENE")),e()}))},ANIMATE:function(e){var t=e.state,i=e.commit;return new Promise((function(e){i("UPDATE_FRAME"),window.requestAnimationFrame((function(){t.controls.update()})),t.renderer.render(t.scene,t.camera),e()}))},REMOVE_LAST_UNIT:function(e,t){var i=e.commit,s=t.pieces;return console.log(s),new Promise((function(e){i("REMOVE_UNIT",s),e()}))},RESET_STATE:function(e){var t=e.commit;return new Promise((function(e){t("RESET_STATE"),e()}))}}});s["default"].use(Se["a"]),s["default"].use(Nt.a),s["default"].config.productionTip=!1,new s["default"]({render:function(e){return e(zt)},store:Ut}).$mount("#app")},"57b5":function(e,t,i){},"67a2":function(e,t,i){e.exports=i.p+"img/white_bishop.ea87fdb6.png"},"85ec":function(e,t,i){},8824:function(e,t,i){"use strict";i("57b5")},8869:function(e,t,i){e.exports=i.p+"img/black_queen.e57aff20.png"},8914:function(e,t,i){e.exports=i.p+"img/black_king.d7cb8763.png"},"9e57":function(e,t,i){e.exports=i.p+"img/white_rook.5abb68d3.png"},"9f78":function(e,t,i){},a56d:function(e,t,i){},b806:function(e,t,i){"use strict";i("f72a")},e31b:function(e,t,i){"use strict";i("a56d")},e72b:function(e,t,i){e.exports=i.p+"img/black_rook.019b2432.png"},e9af:function(e,t,i){e.exports=i.p+"img/black_bishop.4a97bd76.png"},f612:function(e,t,i){"use strict";i("3fcd")},f72a:function(e,t,i){}});
//# sourceMappingURL=app.02fbca02.js.map